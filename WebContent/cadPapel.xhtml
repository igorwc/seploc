<ui:composition xmlns="http://www.worg/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich"
      template="masterpage.xhtml">

<!-- TAXINOMIA -->      
<ui:define name="taxinomia">
   	Cadastros <img src="imgs/ponto.png"/> 
   	Papel
</ui:define>      

<!-- CONTEUDO -->      
<ui:define name="conteudo"> 
<style type="text/css">  
.row1 {   
    background-color: #EDEBEB;   
    font-size: 10px;   
}   
.row2 {   
    background-color: #ffffff;   
    font-size: 10px;   
}   
.col1 {
	text-align: center;
}  
.texto {
	font-family: arial,tahoma;
	font-size: 10pt;
	color: #00008B;
}  
.error { 
	font-weight: bold;
	font-style:normal;
	color:#FF0000;
	font-size: 8pt;
	font-family: tahoma, arial;
}
</style> 



   <f:view>  
   	   <h:form id="cadPapel" enctype="UTF-8" prependId="false" >
   	       <script type="text/javascript" >
  (function($){
    // call setMask function on the document.ready event
       $j(function(){
    	   $j('.seploccurrency').setMask();
      }
    );
  })(jQuery);
</script>
           <rich:panel header="Papel">
			   <!-- Formulario -->
			   <center>
               <rich:panel header="Cadastro do Papel" style="width: 600px">
                 
                 <table	border="0">
                    <tr>
					<td colspan="2"><h:outputText id="papelSucesso" value="Adicionado com Sucesso!!" styleClass="texto" rendered="#{papelBean.sucesso} == 1">
					     <f:facet name="errorMarker">
                            <h:graphicImage  value="/imgs/icons/enabled.gif" />  
                         </f:facet>
                    </h:outputText>
					<h:outputText id="papelErro" value="Adicionado com Sucesso!!" styleClass="texto" rendered="#{papelBean.sucesso} == -1">
					     <f:facet name="errorMarker">
                            <h:graphicImage  value="/imgs/icons/error.gif" />  
                         </f:facet>
                    </h:outputText>
                    <rich:messages for="cadPapel"  >
                    <f:facet name="successMarker">
                            <h:graphicImage  value="/imgs/icons/enabled.gif" />  
                         </f:facet>
                    </rich:messages> 
					</td>					
					</tr>                 
					<tr>
					<td><h:outputText value="Nome Papel: " styleClass="texto"/></td>
					<td><h:inputText value="#{papelBean.papel.nome}" 
									 required="true"
									 requiredMessage="O nome deve ser informado"
									 validator="#{papelBean.validateNome}" 
									 id="nomePapel">
                           <!--  <f:validateLength minimum="2" maximum="20" />   -->                              
                             <rich:ajaxValidator event="onkeyup"  />                            
                        </h:inputText>
                        <h:inputHidden value="#{papelBean.papel.codPapel}" />
                    </td>                    
					</tr>
					<tr>
					<td colspan="2"><rich:message for="nomePapel" styleClass="error" /></td>
					</tr>
					<tr>
					<td><h:outputText value="Impressão Mono (R$): " styleClass="texto"/></td>
					<td><h:inputText value="#{papelBean.papel.impMono}" 
					                 id="mono"
					                 converterMessage="valor deve ser um número."
					                 validatorMessage="valor deve ser um número."
					                 alt="signed-decimal"
					                 styleClass="seploccurrency"
					                 onfocus="$j(function(){
					                   $j(this).setMask();
					                   }
					                   )">
					      <!--     <f:convertNumber maxFractionDigits="2" type="number" /> -->
					          <f:converter converterId="SeplocCurrencyConverter" />
					      <!--        <rich:jQuery selector=".seploccurrency" 
					          query="$j(function(){
					                   $j(this).setMask();
					                   }
					                   )" timing="onload" />-->
					          <rich:ajaxValidator event="onkeyup"/>
					     </h:inputText></td>					
					</tr>
					<tr>
					<td colspan="2"><rich:message for="mono" styleClass="error"/> </td>
					</tr>
					<tr>
					<td><h:outputText value="Impressão Color (R$): " styleClass="texto"/></td>
					<td><h:inputText value="#{papelBean.papel.impColor}" 
					                 id="color"
					                 converterMessage="valor deve ser um número"
					                 validatorMessage="valor deve ser número.">
					          <f:convertNumber maxFractionDigits="2" type="number" />
					          <f:converter converterId="javax.faces.Double" id="javax.faces.Double"/>
					          <rich:ajaxValidator event="onkeyup"/>
					     </h:inputText></td>
					</tr>
					<tr>
					<td colspan="2"><rich:message for="color" styleClass="error"/> </td>
					</tr>					
					<tr>
					<td><h:outputText value="Impressão Shade (R$): " styleClass="texto"/></td>
					<td><h:inputText value="#{papelBean.papel.impShade}" 
					                 id="shade"
					                 converterMessage="valor deve ser número."
					                 validatorMessage="valor deve ser número.">
					          <f:convertNumber maxFractionDigits="2" type="number" />
					          <f:converter converterId="javax.faces.Double" id="javax.faces.Double"/>
					          <rich:ajaxValidator event="onkeyup"/>
					     </h:inputText></td>
					</tr>					
					<tr>
					<td colspan="2"><rich:message for="shade" styleClass="error"/> </td>
					</tr>					
				  </table> 
                  <br/>
                  <a4j:commandButton value="Salvar"
                  action="#{papelBean.cadastra}"
                  reRender="papelList,cadPapel,papelSucesso"
                  />                                              
                  <a4j:commandButton value="Limpar" type="reset" 
                   action="#{papelBean.limpar}"
                   reRender="papelList" />
               </rich:panel>
               </center>
               <rich:dataTable value="#{papelBean.lista}" var="papel"    
                   rowClasses="row1, row2" id="papelList" rows="10"  
                   columnClasses="400,50,50,50,50"  
                   onRowMouseOver="this.style.backgroundColor='#B5F3FB'"  
                   onRowMouseOut="this.style.backgroundColor='#{a4jSkin.rowBackgroundColor}'"  
                   width="600"
                   align="center">  
                   <f:facet name="header">  
                       <rich:columnGroup>  
  
                           <rich:column colspan="5">  
                               <h:outputText value="Papeis Cadastrados" />  
                           </rich:column>  
  
                           <rich:column breakBefore="true">  
                               <h:outputText value="Papel" />  
                           </rich:column>  
  
                           <rich:column>  
                               <h:outputText value="Imp Mono" />  
                           </rich:column>  
  
                           <rich:column>  
                               <h:outputText value="Imp Color" />  
                           </rich:column>  
  
                           <rich:column>  
                               <h:outputText value="Imp Shade" />  
                           </rich:column>  

                           <rich:column/>  
                       </rich:columnGroup>  
                   </f:facet>  
  
                   <rich:column>  
		               <h:outputText value="#{papel.nome}" />  
                   </rich:column>  
  
                   <rich:column styleClass="col1">  
                       <h:outputText value="#{papel.impMono}"/>  
                   </rich:column>  
  
                   <rich:column styleClass="col1">  
                       <h:outputText value="#{papel.impColor}" />  
                   </rich:column>  
  
                   <rich:column styleClass="col1">  
                       <h:outputText value="#{papel.impShade}" />  
                   </rich:column>  
                   <rich:column styleClass="col1">
						<a4j:commandLink ajaxSingle="true" id="editlink" 
						    reRender="cadPapel" action="#{papelBean.editar}" >
							<h:graphicImage value="/imgs/edit.gif" style="border:0" />
							<f:setPropertyActionListener value="#{papel.codPapel}"
								target="#{papelBean.papel.codPapel}" />
						</a4j:commandLink>
						<rich:toolTip for="editlink" value="Edit" />
						<a4j:commandLink ajaxSingle="true" id="deletelink"
							reRender="papelList" action="#{papelBean.apaga}">
							<h:graphicImage value="/imgs/delete_icon.gif" style="border:0" />
							<f:setPropertyActionListener value="#{papel.codPapel}"
								target="#{papelBean.papel.codPapel}" />
						</a4j:commandLink>
						<rich:toolTip for="deletelink" value="Delete" />
					</rich:column>  
               </rich:dataTable>  
               <rich:datascroller for="papelList" maxPages="3" >
                  <f:facet name="first">
                     <h:outputText value="Primeiro" style="font-size:11pt"/>
                  </f:facet>
                  <f:facet name="last">
                     <h:outputText value="Último" style="font-size:11pt"/>
                  </f:facet>               
               </rich:datascroller>  
           </rich:panel>  
       </h:form>  
   </f:view>  
</ui:define>
</ui:composition>