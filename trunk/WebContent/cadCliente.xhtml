<ui:composition xmlns="http://www.worg/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich"
      template="masterpage.xhtml">

<!-- TAXINOMIA -->      
<ui:define name="taxinomia">
   	<h:outputText value="#{msgs.tax_cad_root}"/> <img src="imgs/ponto.png"/> 
   	<h:outputText value="#{msgs.tax_cad_cliente}"/>
</ui:define>      

<!-- CONTEUDO -->      
<ui:define name="conteudo"> 
<style type="text/css">  
.row1 {   
    background-color: #EDEBEB;   
    font-size: 10px;   
}   
.row2 {   
    background-color: #ffffff;   
    font-size: 10px;   
}   
.col1 {
	text-align: center;
}  
.texto {
	font-family: arial,tahoma;
	font-size: 10pt;
	color: #00008B;
}  
.error { 
	font-weight: bold;
	font-style:normal;
	color:#FF0000;
	font-size: 8pt;
	font-family: tahoma, arial;
}
.scrollerCell {
    padding-right: 10px;
    padding-left: 10px;
    height: 15pt;
}
</style> 



   <f:view>  
   	  
   	   <script type="text/javascript" >
             					(function($j){
                 					$j(function(){
    	             					$j('.CEP').setMask();
    	             					$j('.PHONE').setMask();
                     				}
                  				);
              				})(jQuery);  
          				 </script>
           <rich:panel header="Cliente">
			   <!-- Formulario -->
			   <center>
               <rich:panel header="Cadastro de Cliente" id="clientePanel" style="width: 600px">
                  <h:form id="cadCliente" enctype="UTF-8" prependId="false" >
                 <table	border="0" id="clientForm" >  
                   <a4j:outputPanel layout="block">
					<tr align="left">
					<td><h:outputText value="Tipo Documento: " styleClass="texto"/></td>
					<td><a4j:outputPanel layout="block">
					    		<h:selectOneRadio id="tpDocCli"  value="#{navigationBean.opcaoDocId}"  binding="#{clienteBean.selectDocType}" >
									<f:selectItem id="doc1" itemLabel="CNPJ" itemValue="1"  />
									<f:selectItem id="doc2" itemLabel="CPF" itemValue="2"  />
									 <a4j:support event="onclick" reRender="docinput,docinput3" action="#{clienteBean.limpaDoc}" ajaxSingle="true" />
									 <f:convertNumber integerOnly="true" type="number"/>
					    		</h:selectOneRadio>
					    </a4j:outputPanel>
                    </td>   
                      
                                 
					<td> <a4j:outputPanel id="docinput"  >  
					    <h:outputText value="Número CNPJ: " styleClass="texto"  rendered="#{navigationBean.opcaoDocId == navigationBean.CNPJ}" />
					    <h:outputText value="Número CPF: " styleClass="texto" rendered="#{navigationBean.opcaoDocId ==  navigationBean.CPF}"/>
					     </a4j:outputPanel>    
					</td>
					<td><a4j:outputPanel id="docinput3"  > 
					<script type="text/javascript" >
             					(function($j){
                 					$j(function(){
    	             					$j('.seplocCPF').setMask();
    	              					$j('.seplocCNPJ').setMask();
                     				}
                  				);
              				})(jQuery);  
          				 </script>
					     <h:inputText value="#{clienteBean.CNPJ}" 
					                  rendered="#{navigationBean.opcaoDocId == navigationBean.CNPJ}"
					                  validator="#{clienteBean.validateCNPJ}"
									  styleClass="seplocCNPJ" 
									  alt="cnpj"
									  id = "cnpjCli"
									  binding="#{clienteBean.inputCNPJ}"
									 >
					                 <f:converter converterId="SeplocCNPJConverter" /> 
					                 <rich:ajaxValidator event="onkeyup" />
                        </h:inputText>
                        <h:inputText value="#{clienteBean.CPF}" 
                                     rendered="#{navigationBean.opcaoDocId  == navigationBean.CPF}"	
                                     validator="#{clienteBean.validateCPF}"
									 styleClass="seplocCPF" 
									 alt="cpf"
									 id = "cpfCli"
									  binding="#{clienteBean.inputCPF}">        
					                 <f:converter converterId="SeplocCPFConverter" /> 
					                 <rich:ajaxValidator event="onkeyup" />                              
                        </h:inputText>
                        
                         </a4j:outputPanel>    
                    </td>                         
                      
					</tr>			
				</a4j:outputPanel>	
					<tr>
					<td colspan="2" align="left">
					</td>
					<td colspan="2" align="left">
					    <rich:message for="cnpjCli" styleClass="error" />
					    <rich:message for="cpfCli" styleClass="error" />
					</td>					
					</tr>
					
					<tr align="left">
					<td><h:outputText value="Razão Social: " styleClass="texto"/><h:inputHidden value="#{clienteBean.cliente.idCliente}"  /></td>
					<td><h:inputText value="#{clienteBean.cliente.razao}" 
									 validator="#{clienteBean.validateRazaoSocial}" 								 
									 id="razaoCli" >                             
                             <rich:ajaxValidator event="onkeyup"  />                            
                        </h:inputText>                        
                    </td>                    
					<td><h:outputText value="Nome Fantasia: " styleClass="texto"/></td>
					<td><h:inputText value="#{clienteBean.cliente.fantasia}" 
					                 validator="#{clienteBean.validateFantasia}"
									 id="fantasiaCli">                                                   
                        </h:inputText> 
                    </td>                    
					</tr>					
					<tr>
					<td colspan="2"><rich:message for="razaoCli" styleClass="error" /></td>
					<td colspan="2"><rich:message for="fantasiaCli" styleClass="error" /></td>
					</tr>					
					
					<tr align="left">
					<td><h:outputText value="Endereço: " styleClass="texto"/></td>
					<td colspan="3"><h:inputText value="#{clienteBean.cliente.endereco}" 
									 id="enderCli" 
									 size="65" maxlength="65"/>                        
                    </td>                    
					</tr>					
					<tr>
					<td colspan="4"><rich:message for="enderCli" styleClass="error" /></td>					
					</tr>						
					<tr align="left">
					<td><h:outputText value="Localidade: " styleClass="texto"/></td>
					<td colspan="3"><h:inputText value="#{clienteBean.cliente.cidade}" 
									 id="localidadeCli" 
									 size="63"
							         readonly="true"
							         required="true" 
							         />
						<a4j:commandLink ajaxSingle="true" id="editLocalidade" 
								oncomplete="#{rich:component('modalLocalidade')}.show();return false;">
							<h:graphicImage value="/imgs/botao-editar.png" style="border:0" />					
						</a4j:commandLink>
                    </td>           
					</tr>					
					<tr>
					<td colspan="4"><rich:message for="localidadeCli" styleClass="error" /></td>
					</tr>
					<tr align="left">
					<td><h:outputText value="Bairro: " styleClass="texto"/></td>
					<td>
						<a4j:outputPanel id="bairro" >
				  			<h:inputText id="bairroCli" value="#{clienteBean.cliente.bairro}" />
				   			<rich:suggestionbox for="bairroCli" minChars="2"
				       			fetchValue="#{sug_bairro.nome}" nothingLabel="Bairro não encontrado."
				         		suggestionAction="#{suggestionBean.complementoBairro}" var="sug_bairro">
				         		<h:column>
				            		<h:outputText value="#{sug_bairro.nome}" />
				         		</h:column>
				            	<a4j:support ajaxSingle="true" event="onselect">
				            		<f:setPropertyActionListener value="#{sug_bairro.id}"
				                    target="#{suggestionBean.codBairro}" />
				         		</a4j:support>
				  			</rich:suggestionbox> 
				  		</a4j:outputPanel>                    
                    </td>          
   					<td><h:outputText value="CEP: " styleClass="texto"/></td>
					<td><h:inputText value="#{clienteBean.cliente.cep}" 
									 id="cepCli"
									 alt="cep"
									 styleClass="CEP">                                                         
                        </h:inputText>                        
                    </td>    
					</tr>					
					<tr>
					<td colspan="2"><rich:message for="bairroCli" styleClass="error" /></td>
					<td colspan="2"><rich:message for="cepCli" styleClass="error" /></td>
					</tr>			
					
			    <tr align="left">
					<td><h:outputText value="Fone Comercial: " styleClass="texto"/></td>
					<td><h:inputText value="#{clienteBean.foneCliente.foneComercial}" 
									 id="foneComCli"
									 alt="phone"
									 styleClass="PHONE">                                                         
                        </h:inputText>
                    </td>                    
					<td><h:outputText value="Fone Residencial: " styleClass="texto"/></td>
					<td><h:inputText value="#{clienteBean.foneCliente.foneResidencial}" 
									 id="foneResCli"
									 alt="phone"
									 styleClass="PHONE">                             
                        </h:inputText>
                    </td>                    
					</tr>					

					<tr align="left">
					<td><h:outputText value="Celular: " styleClass="texto"/></td>
					<td><h:inputText value="#{clienteBean.foneCliente.celular}" 
									 id="celCli"
									 alt="phone"
									 styleClass="PHONE">                                                       
                        </h:inputText>
                    </td>                    
					<td><h:outputText value="Fone Fax: " styleClass="texto"/></td>
					<td><h:inputText value="#{clienteBean.foneCliente.fax}" 
									 id="faxCli"
									 alt="phone"
									 styleClass="PHONE">                                                      
                        </h:inputText>
                    </td>                    
					</tr>
					<tr align="left">
					<td><h:outputText value="E-mail: " styleClass="texto"/></td>
					<td><h:inputText value="#{clienteBean.cliente.email}" 
									 validator="#{clienteBean.validateEmail}"
									 id="emailCli">       
									  <rich:ajaxValidator event="onkeyup"  />                                                 
                        </h:inputText>
                              
                    </td>                    
					<td><h:outputText value="Inscrição: " styleClass="texto"/></td>
					<td><h:inputText value="#{clienteBean.cliente.inscricao}" 
									 id="inscricaoCli">                                                      
                        </h:inputText>
                    </td>                    
					</tr>		
					<tr>
					<td></td><td><rich:message for="emailCli" styleClass="error" /></td><td colspan="2"></td>
					</tr>
					<tr align="left">
					<td><h:outputText value="Observação: " styleClass="texto"/></td>
					<td colspan="3"><h:inputTextarea value="#{clienteBean.cliente.obs}" 
									 				required="false"									 
									 				id="obsCli"
									 				cols="50" rows="3"/>
                    </td>                    
					</tr>	
					
					<tr align="left">
					<td><h:outputText value="Entrega Padrão: " styleClass="texto"/></td><!--
					<td><h:selectOneMenu value="#{clienteBean.cliente.entregaPadrao.local}" 
									 required="false"									 
									 id="entregaPadraoCli">
							<f:selectItems value="#{entregaBean.lista}" />                                                       
                        </h:selectOneMenu>
                    </td>-->
                    <td>
                    <rich:comboBox selectFirstOnUpdate="false"
                                   defaultLabel="Local de Entrega"
                                   id="entregaPadraoCli" 
                                   value="#{clienteBean.entregaCliente}"
                                   validator="#{appBean.validateEntrega}"
                                   >
                         <f:selectItems value="#{appBean.locaisEntrega}" />
                        <rich:ajaxValidator event="onkeyup"  />    
                        <rich:ajaxValidator event="onchange"  />  
                    </rich:comboBox>
                    </td>                                        
					<td><h:outputText value="Papel Padrão: " styleClass="texto"/></td>
					<td>
					 <rich:comboBox selectFirstOnUpdate="false"
                                   defaultLabel="Nome do Papel"
                                   id="papelPadraoCli" 
                                   value="#{clienteBean.papelCliente}"
                                   validator="#{appBean.validatePapeis}"
                                   >
                         <f:selectItems value="#{appBean.papeis}"  />
                        <rich:ajaxValidator event="onkeyup"  />    
                        <rich:ajaxValidator event="onchange"  />   
                    </rich:comboBox>
                    </td>                    
					</tr>	
					<tr>
					<td></td>
					<td align="right">
					     <rich:message for="entregaPadraoCli" styleClass="error"  />
					    <h:outputText value="Não existem Locais de Entrega cadastrados" rendered="#{appBean.tamanholistaEntrega  == 0}" styleClass="texto"/> 
					</td>
					<td></td>
					<td align="right">
					    <rich:message for="papelPadraoCli" styleClass="error"  />
					    <h:outputText value="Não existem Papeis cadastrados" rendered="#{appBean.tamanholistaPapel  == 0}" styleClass="texto"/> 
					    </td>
					</tr>			
				  </table> 
				  <!-- Botoes -->
                  <br/>
                  <a4j:commandButton value="Salvar" 
                  action="#{clienteBean.cadastra}" 
                  reRender="cadCliente"
                  oncomplete="#{rich:component('confirmationMessage')}.show()" 
                    />                                              
                  <a4j:commandButton value="Limpar" type="reset" 
                   action="#{clienteBean.limpa}" />
                     </h:form>
               </rich:panel>
               </center>
               <!-- fim Formulario -->
           </rich:panel>           
       
       
        <!-- Mensagens -->
        <rich:modalPanel id="confirmationMessage" autosized="true" width="300">
        <f:facet name="header">
            <h:outputText value="Cadastro de Cliente"
                style="padding-right:15px;" />
        </f:facet>
        <f:facet name="controls">
            <h:panelGroup>
                <h:graphicImage value="/imgs/icons/close.png"
                    styleClass="hidelink" id="hidelink2" />
                <rich:componentControl for="deletePanel" attachTo="hidelink2"
                    operation="hide" event="onclick" />
            </h:panelGroup>
        </f:facet>
        <h:form>
            <table width="100%">
                <tbody>
                    <tr>
                        <td align="center" width="100%">
                           	<rich:messages   showDetail="false" showSummary="true" styleClass="texto"/> 
                        </td>
                    </tr>
                    <tr>
                        <td align="center" width="100%"><a4j:commandButton
                            value="OK"
                            onclick="#{rich:component('confirmationMessage')}.hide();return false;" />
                        </td>
                    </tr>
                </tbody>
            </table>
        </h:form>
    </rich:modalPanel>
       
       
       
   </f:view>  
   
</ui:define>
</ui:composition>