<ui:composition xmlns="http://www.worg/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	template="../templatepage/masterpage.xhtml">

	<!-- TAXINOMIA -->
	<ui:define name="taxinomia">
		<h:outputText value="#{msgs.tax_relat_root}" />
		<img src="../imgs/ponto.png" /><rich:spacer width="5px"/>
		<h:outputText value="#{msgs.tax_relat_producao}" />
	</ui:define>


    <!-- CONTEUDO -->
    <ui:define name="conteudo">
        <style type="text/css">
.row1 {
    background-color: #EDEBEB;
    font-size: 10px;
}

.row2 {
    background-color: #ffffff;
    font-size: 10px;
}

.col1 {
    text-align: center;
}

.col2 {
    text-align: left;
}

.texto {
    font-family: arial, tahoma;
    font-size: 10pt;
    color: #00008B;
}

.error {
    font-weight: bold;
    font-style: normal;
    color: #FF0000;
    font-size: 8pt;
    font-family: tahoma, arial;
}

.scrollerCell {
    padding-right: 10px;
    padding-left: 10px;
    height: 15pt;
}

.formulario,.formulario TD,.formulario TH {
    background-color: #f2f2f5;
}
</style>



        <f:view>
            <h:form id="formReqProducao" enctype="UTF-8" prependId="false">
                <rich:panel header="Relatório" >
                    <!-- Formulario -->
                    <center><rich:panel
                        header="Requisições Cadastradas
                        style="width: 350px" >
                        <table border="0">
                            <tr align="left">
                                <td colspan="2">
                                    <h:outputText value="#{msgs['relatorios.general.periodo']}"
                                                  styleClass="texto" />
                                </td>
                                <td></td>
                            </tr>
                            <tr>
                                <td><rich:calendar
                                    value="#{relProducaoCB.relProducaoMB.dataInicio}"
                                    locale="#{relProducaoCB.locale}" popup="true"
                                    datePattern="dd/MM/yyyy" showApplyButton="false"
                                    cellWidth="24px" cellHeight="22px" style="block:inline"
                                    inputSize="30" id="dataInicioProd">
                                    <a4j:support event="onchanged"
                                        action="#{relProducaoCB.relProducaoMB.buscaRequisicoes}"
                                        reRender="dataInicioProd,dataFimProd,prodList,dsProducao"></a4j:support>
                                    <f:convertDateTime pattern="dd/MM/yyyy" type="date" />
                                </rich:calendar> <h:outputText value=" até " styleClass="texto" /></td>
                                <td><rich:calendar
                                    value="#{relProducaoCB.relProducaoMB.dataFim}"
                                    locale="#{relProducaoCB.locale}" popup="true"
                                    datePattern="dd/MM/yyyy" showApplyButton="false"
                                    cellWidth="24px" cellHeight="22px" style="width:200px"
                                    inputSize="30" id="dataFimCob">
                                    <a4j:support event="onchanged"
                                        action="#{relProducaoCB.relProducaoMB.buscaRequisicoes}"
                                        reRender="dataInicioProd,dataFimProd,prodList,dsProducao"></a4j:support>
                                    <f:convertDateTime pattern="dd/MM/yyyy" type="date" />
                                </rich:calendar></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td colspan="1">
                                </td>
                                <td></td>
                                <td></td>
                            </tr>
                            
                        </table>
                        <!-- Botoes -->
                        <br />
                        <a4j:commandButton value="#{msgs['botao.pesquisar']}"
                                     action="#{relProducaoCB.relProducaoMB.buscaRequisicoes}" 
                                     reRender="dsRequisicoes,lbValorTotal,requisicaoList,lbValorDesconto,descCliente,desconto"
                                     id="salvaDesconto"/>
                        <a4j:commandButton value="#{msgs['botao.limpar']}"
                            action="#{relProducaoCB.relProducaoMB.limpar}"
                            reRender="dataInicioCli,dataFimCli,cliente,dsRequisicoes,lbValorTotal,requisicaoList,lbValorDesconto,descCliente,desconto" />

                    </rich:panel></center>

                    <!-- Grid -->
                    <rich:dataTable
                        value="#{relProducaoCB.relProducaoMB.listaProducaoCliCadastrado}"
                        var="cliCadastrados" rowClasses="row1, row2" id="cobradorList"
                        rows="12" columnClasses="400,150,50"
                        onRowMouseOver="this.style.backgroundColor='#B5F3FB'"
                        onRowMouseOut="this.style.backgroundColor='#{a4jSkin.rowBackgroundColor}'"
                        width="350" align="center">
                        <f:facet name="header">
                            <rich:columnGroup>
                                <rich:column colspan="4">
                                    <h:outputText value="Cliente Cadastrado" />
                                </rich:column>

                                <rich:column breakBefore="true" width="40%">
                                    <h:outputText value="Mes" />
                                </rich:column>

                                <rich:column width="20%">
                                    <h:outputText value="Total Requisições" />
                                </rich:column>

                                <rich:column width="20%">
                                    <h:outputText value="Valor Total(R$)" />
                                </rich:column>
                                
                                <rich:column width="20%">
                                    <h:outputText value="Valor Desconto(R$)" />
                                </rich:column>

                            </rich:columnGroup>
                        </f:facet>

                        <rich:column styleClass="col1">
                            <h:outputText value="#{cliCadastrados.nomeMes}" />                            
                        </rich:column>

                        <rich:column styleClass="col2">
                            <h:outputText value="#{cliCadastrados.totalReq}"/>
                        </rich:column>
                        <rich:column styleClass="col1">
                            <h:outputText value="#{cliCadastrados.valorTotal}">
                                <f:convertNumber type="currency" currencySymbol="R$" />
                            </h:outputText>
                        </rich:column>
                        <rich:column styleClass="col1">
                            <h:outputText value="#{cliCadastrados.valorDesconto}">
                                <f:convertNumber type="currency" currencySymbol="R$" />
                            </h:outputText>
                        </rich:column>
                    </rich:dataTable>

                </rich:panel>
            </h:form>

            <!-- Modal -->
            <rich:modalPanel id="confirmationMessage" autosized="true"
                width="200">
                <f:facet name="header">
                    <h:outputText value="Cadastro de Cobrador"
                        style="padding-right:15px;" />
                </f:facet>
                <f:facet name="controls">
                    <h:panelGroup>
                        <h:graphicImage value="../imgs/icons/close.png"
                            styleClass="hidelink" id="hidelink2" />
                        <rich:componentControl for="deletePanel" attachTo="hidelink2"
                            operation="hide" event="onclick" />
                    </h:panelGroup>
                </f:facet>
                <h:form>
                    <table width="100%">
                        <tbody>
                            <tr>
                                <td align="center" width="100%"><rich:messages
                                    showDetail="false" showSummary="true" styleClass="texto" /></td>
                            </tr>
                            <tr>
                                <td align="center" width="100%"><a4j:commandButton
                                    value="OK"
                                    onclick="#{rich:component('confirmationMessage')}.hide();return false;" />
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </h:form>
            </rich:modalPanel>
            
			<!-- Loading -->
            <rich:modalPanel id="panel_loading" autosized="true">
                <h:graphicImage url="../imgs/ajax-loader.gif"
                    style="border:0px; vertical-align: middle;" />
                <rich:spacer width="20" />
                <h:outputText value="Aguarde..." />
            </rich:modalPanel>

            <a4j:status id="loading"
                onstart="Richfaces.showModalPanel('panel_loading')"
                onstop="Richfaces.hideModalPanel('panel_loading')" />


        </f:view>

    </ui:define>

</ui:composition>

