<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">

	<style type="text/css">
.col {
	width: 50%;
	padding: 10px;
	padding: 0px 30px 0px 0px;
	vertical-align: top;
}
</style>
<!-- JS -->    
  <script type="text/javascript" src="js/jquery-1.4.2.js" ></script>
  <script type="text/javascript" src="js/jquery.meio.mask.js" charset="utf-8"></script>
  <script>
     var $j = jQuery.noConflict();
   </script>
	<br />

	<h:panelGrid columns="2" width="100%" columnClasses="col">

		<h:panelGroup>
                This code does not work as expected. The expected echo text does not appear
                below even the condition for <code>'renderer'</code> returns <code>true</code>.
                Also, the error message does not appear when the length of the text reaches the limit.
            </h:panelGroup>

		<h:panelGroup>
                This code works properly. The <code>h:message</code> is marked for update during
                each Ajaxrequest/response. The place for bottom label is reserved with
                <code>outputPanel</code> while  the component is not rendered.
            </h:panelGroup>

		<a4j:outputPanel layout="block">
			<a4j:outputPanel layout="block">
				<h:form>
					<h:outputText style="font-weight: bold;" value="Enter Text: " />
					<h:selectOneRadio id="tpDocCli"
						value="#{navigationBean.opcaoDocId}">
						<f:selectItem id="doc1" itemLabel="CNPJ" itemValue="1" />
						<f:selectItem id="doc2" itemLabel="CPF" itemValue="2" />
						<a4j:support event="onchange" reRender="out2" />
						<a4j:support event="onclick" reRender="out2,docinput2" />
					</h:selectOneRadio>
				</h:form>
			</a4j:outputPanel>

			<a4j:outputPanel id="out2">
				<h:outputText value="Número CNPJ: " styleClass="texto"
					rendered="#{navigationBean.opcaoDocId == 1}" />
				<h:outputText value="Número CPF: " styleClass="texto"
					rendered="#{navigationBean.opcaoDocId == 2}" />
			</a4j:outputPanel>
			<a4j:outputPanel id="docinput2"  >  <h:inputText value="#{clienteBean.cliente.cnpj}" rendered="#{navigationBean.opcaoDocId == 1}"									 
									 validatorMessage="valor deve ser um número."
									 id="cnpjCli">                             
                             <rich:ajaxValidator event="onkeyup"  />                            
                        </h:inputText>
                        <h:inputText value="#{clienteBean.cliente.cpf}" rendered="#{navigationBean.opcaoDocId == 2}"								 
									 validatorMessage="valor deve ser um número."
									 id="cpfCli">                             
                             <rich:ajaxValidator event="onkeyup"  />                            
                        </h:inputText>
                        
                         </a4j:outputPanel>
		</a4j:outputPanel>
	</h:panelGrid>

	<br />
<table	border="0" >  
                   <a4j:outputPanel layout="block">
					<tr align="left">
					<td><h:outputText value="Tipo Documento: " styleClass="texto"/></td>
					<td><a4j:outputPanel layout="block">
							<h:form >
					    		<h:selectOneRadio id="tpDocCli"  value="#{navigationBean.opcaoDocId}"  >
									<f:selectItem id="doc1" itemLabel="CNPJ" itemValue="1"  />
									<f:selectItem id="doc2" itemLabel="CPF" itemValue="2"  />
									 <a4j:support event="onchange" reRender="docinput,docinput3"  />
									 <a4j:support event="onclick" reRender="docinput,docinput3"  />
									 <f:convertNumber integerOnly="true" type="number"/>
					    		</h:selectOneRadio>
					    	</h:form>
					    </a4j:outputPanel>
                    </td>   
                      
                                 
					<td> <a4j:outputPanel id="docinput"  >  
					    <h:outputText value="Número CNPJ: " styleClass="texto"  rendered="#{navigationBean.opcaoDocId == 1}"/>
					    <h:outputText value="Número CPF: " styleClass="texto" rendered="#{navigationBean.opcaoDocId == 2}"/>
					     </a4j:outputPanel>    
					</td>
					<td><a4j:outputPanel id="docinput3"  > 
					<script type="text/javascript" >
             					(function($j){
                 					$j(function(){
    	             					$j('.seplocCPF').setMask();
    	              					$j('.seplocCNPJ').setMask();
                     				}
                  				);
              				})(jQuery);  
          				 </script>
					     <h:inputText value="#{clienteBean.cliente.cnpj}" rendered="#{navigationBean.opcaoDocId == navigationBean.CNPJ}"
									 >                             
                             <rich:ajaxValidator event="onkeyup"  />                            
                        </h:inputText>
                        <h:inputText value="#{clienteBean.cliente.cpf}" rendered="#{navigationBean.opcaoDocId  == navigationBean.CPF}"	
									  style=" background-color: #EDEBEB; ">                             
                             <rich:ajaxValidator event="onkeyup"  />                            
                        </h:inputText>
                        
                         </a4j:outputPanel>    
                    </td>                         
                      
					</tr>			
				</a4j:outputPanel>
				</table>
				<table	border="1" >  
                     <a4j:outputPanel layout="block">
					<tr align="left">
					<td><h:outputText value="Tipo Documento: " styleClass="texto"/></td>
					<td><a4j:outputPanel layout="block">
							<h:form >
					    		<h:selectOneRadio id="tpDocCli"  value="#{navigationBean.opcaoDocId}"  >
									<f:selectItem id="doc1" itemLabel="CNPJ" itemValue="1"  />
									<f:selectItem id="doc2" itemLabel="CPF" itemValue="2"  />
									 <a4j:support event="onchange" reRender="docinput4,docinput5"  />
									 <a4j:support event="onclick" reRender="docinput4,docinput5"  />
									 <f:convertNumber integerOnly="true" type="number"/>
					    		</h:selectOneRadio>
					    	</h:form>
					    </a4j:outputPanel>
                    </td>   
                      
                                 
					<td> <a4j:outputPanel id="docinput4"  >  
					    <h:outputText value="Número CNPJ: " styleClass="texto"  rendered="#{navigationBean.opcaoDocId == 1}"/>
					    <h:outputText value="Número CPF: " styleClass="texto" rendered="#{navigationBean.opcaoDocId == 2}"/>
					     </a4j:outputPanel>    
					</td>
					<td><a4j:outputPanel id="docinput5"  > 
					<script type="text/javascript" >
             					(function($j){
                 					$j(function(){
    	             					$j('.seplocCPF').setMask();
    	              					$j('.seplocCNPJ').setMask();
                     				}
                  				);
              				})(jQuery);  
          				 </script>
					     <h:inputText value="#{clienteBean.cliente.cnpj}" rendered="#{navigationBean.opcaoDocId == navigationBean.CNPJ}"
									 >                             
                             <rich:ajaxValidator event="onkeyup"  />                            
                        </h:inputText>
                        <h:inputText value="#{clienteBean.cliente.cpf}" rendered="#{navigationBean.opcaoDocId  == navigationBean.CPF}"	
									  style=" background-color: #EDEBEB; ">                             
                             <rich:ajaxValidator event="onkeyup"  />                            
                        </h:inputText>
                        
                         </a4j:outputPanel>    
                    </td>                         
                      
					</tr>			
				</a4j:outputPanel>
				</table>
</ui:composition>